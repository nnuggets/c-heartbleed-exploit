CC=gcc
CPPFLAGS=-I.
CFLAGS=-g
LDFLAGS=-lcrypto -lssl -lpthread

all: heartbleed

heartbleed: heartbleed.o s3_pkt.o s3_both.o
	$(CC) $(CPPFLAGS) $(CFLAGS) -o $@ $^ $(LDFLAGS)

s3_pkt.o: s3_pkt.c e_os.h ssl_locl.h
	$(CC) $(CPPFLAGS) $(CFLAGS) -c -o $@ $<

s3_both.o: s3_both.c e_os.h ssl_locl.h
	$(CC) $(CPPFLAGS) $(CFLAGS) -c -o $@ $<

clean:
	-rm -rf *.o *~ heartbleed

.PHONY: clean
